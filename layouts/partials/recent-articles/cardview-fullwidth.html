{{/* Recent items count (fallback = 5) */}}
{{ $recentArticles := 5 }}
{{ with .Site.Params.homepage.showRecentItems }}{{ $recentArticles = . }}{{ end }}

{{/* Source set: only regular pages inside mainSections */}}
{{ $base := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}

{{/* Toggle ordering: by weight (true) vs by date/lastmod (false/default) */}}
{{ $byWeight := .Site.Params.homepage.showRecentByWeight | default false }}
{{ $ordered := $base }}
{{ if not $byWeight }}
  {{/* Ignore weight: newest first using Lastmod -> Date fallback */}}
  {{ $ordered = $base.ByLastmod.Reverse }}
{{ end }}

<div class="relative w-screen max-w-[1600px] px-[30px] left-[calc(max(-50vw,-800px)+50%)]">
  <section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5">
    {{ range first $recentArticles $ordered }}
      {{ partial "article-link/card.html" . }}
    {{ end }}
  </section>
</div>
